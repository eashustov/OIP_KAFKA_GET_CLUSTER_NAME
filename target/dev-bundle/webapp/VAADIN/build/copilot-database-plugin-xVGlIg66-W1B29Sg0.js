import{n as d,w as c,g as p}from"./indexhtml-5JtH9nlG.js";import{o as h}from"./base-panel-ZMfG2SWA-ylp3jc5Q.js";async function u(e){const t=()=>!!e.document.querySelector("[name='url']");let n;const o=new Promise(r=>{n=r}),a=setInterval(()=>{t()&&(clearInterval(a),n())},10);return o}function b(e,t){const n=e.document;n.querySelector("[name='url']").value=t,n.querySelector("[type='submit']").click()}var m=Object.defineProperty,g=Object.getOwnPropertyDescriptor,s=(e,t,n,o)=>{for(var a=o>1?void 0:o?g(t,n):t,r=e.length-1,l;r>=0;r--)(l=e[r])&&(a=(o?l(t,n,a):l(a))||a);return o&&a&&m(t,n,a),a};let i=class extends h{constructor(){super(...arguments),this.handleDbInitEvent=e=>{const t=e.data.h2;t&&(this.h2path=t.path,this.h2jdbcUrl=t.jdbcUrl)}}connectedCallback(){super.connectedCallback(),this.onCommand("devtools-database-init",this.handleDbInitEvent)}render(){return d`<div style="padding: 1em;display:inline-flex;flex-direction:column;">
      <button ?disabled=${!this.h2path} @click=${this.openH2Console}>Open H2 console</button>${this.h2path?"":"H2 is not in use"}
    </div>`}async openH2Console(){const e=window.open(this.h2path);await u(e),b(e,this.h2jdbcUrl)}};s([c()],i.prototype,"h2path",2);s([c()],i.prototype,"h2jdbcUrl",2);i=s([p("copilot-database-panel")],i);const v={header:"Database",expanded:!0,draggable:!0,panelOrder:0,panel:"right",floating:!1,tag:"copilot-database-panel"},y={init(e){e.addPanel(v)}};window.Vaadin.copilotPlugins.push(y);export{i as CopilotDatabasePanel};
