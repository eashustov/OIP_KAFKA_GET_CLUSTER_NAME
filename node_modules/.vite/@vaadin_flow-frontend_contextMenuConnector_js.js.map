{
  "version": 3,
  "sources": ["../@vaadin/flow-frontend/contextMenuConnector.js"],
  "sourcesContent": ["import * as Gestures from \"@vaadin/component-base/src/gestures.js\";\n(function() {\n  const tryCatchWrapper = function(callback) {\n    return window.Vaadin.Flow.tryCatchWrapper(callback, 'Vaadin Context Menu');\n  };\n\n  window.Vaadin.Flow.contextMenuConnector = {\n    // NOTE: This is for the TARGET component, not for the <vaadin-context-menu> itself\n    init: target =>\n      tryCatchWrapper(function(target) {\n        if (target.$contextMenuConnector) {\n          return;\n        }\n\n        target.$contextMenuConnector = {\n          openOnHandler: tryCatchWrapper(function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.$contextMenuConnector.openEvent = e;\n            let detail = {};\n            if (target.getContextMenuBeforeOpenDetail) {\n              detail = target.getContextMenuBeforeOpenDetail(e);\n            }\n            target.dispatchEvent(\n              new CustomEvent(\"vaadin-context-menu-before-open\", {\n                detail: detail\n              })\n            );\n          }),\n\n          updateOpenOn: tryCatchWrapper(function(eventType) {\n            this.removeListener();\n            this.openOnEventType = eventType;\n\n            customElements.whenDefined(\"vaadin-context-menu\").then(\n              tryCatchWrapper(() => {\n                if (Gestures.gestures[eventType]) {\n                  Gestures.addListener(target, eventType, this.openOnHandler);\n                } else {\n                  target.addEventListener(eventType, this.openOnHandler);\n                }\n              })\n            );\n          }),\n\n          removeListener: tryCatchWrapper(function() {\n            if (this.openOnEventType) {\n              if (Gestures.gestures[this.openOnEventType]) {\n                Gestures.removeListener(\n                  target,\n                  this.openOnEventType,\n                  this.openOnHandler\n                );\n              } else {\n                target.removeEventListener(\n                  this.openOnEventType,\n                  this.openOnHandler\n                );\n              }\n            }\n          }),\n\n          openMenu: tryCatchWrapper(function(contextMenu) {\n            contextMenu.open(this.openEvent);\n          }),\n\n          removeConnector: tryCatchWrapper(function() {\n            this.removeListener();\n            target.$contextMenuConnector = undefined;\n          })\n        };\n      })(target),\n\n    generateItems: (menu, appId, nodeId) =>\n      tryCatchWrapper(function(menu, appId, nodeId) {\n        menu._containerNodeId = nodeId;\n\n        const getContainer = function(nodeId) {\n          try {\n            return window.Vaadin.Flow.clients[appId].getByNodeId(nodeId);\n          } catch (error) {\n            console.error(\"Could not get node %s from app %s\", nodeId, appId);\n            console.error(error);\n          }\n        };\n\n        const getChildItems = function(parent) {\n          const container = getContainer(parent._containerNodeId);\n          const items =\n            container &&\n            Array.from(container.children).map(child => {\n              const item = {\n                  component: child,\n                  checked: child._checked,\n                  theme: child._theme\n              };\n              if (\n                child.tagName == \"VAADIN-CONTEXT-MENU-ITEM\" &&\n                child._containerNodeId\n              ) {\n                item.children = getChildItems(child);\n              }\n              child._item = item;\n              return item;\n            });\n          return items;\n        };\n\n        const items = getChildItems(menu);\n        menu.items = items;\n      })(menu, appId, nodeId),\n\n    setChecked: (component, checked) =>\n      tryCatchWrapper(function(component, checked) {\n        if (component._item) {\n          component._item.checked = checked;\n        }\n      })(component, checked),\n\n    setTheme: (component, theme) =>\n        tryCatchWrapper((component, theme) => {\n            if (component._item) {\n                component._item.theme = theme;\n            }\n        })(component, theme)\n  };\n})();\n"],
  "mappings": "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",
  "names": ["target", "menu", "appId", "nodeId", "items", "component", "checked", "theme"]
}
